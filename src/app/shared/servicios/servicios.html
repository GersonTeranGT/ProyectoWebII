<section class="py-16 bg-emerald-50">
    <div class="max-w-6xl mx-auto px-4">
        <div class="text-center mb-12">
            <h2 class="text-3xl font-extrabold text-gray-900 sm:text-4xl">Nuestros Servicios</h2>
            <p class="mt-4 text-lg text-gray-600">
                {{subtitulo}}
            </p>

            @if (servicioSeleccionado !== 'Ninguno') {
            <p class="mt-2 text-green-600 font-semibold italic">
                Has mostrado interés en: {{servicioSeleccionado}}
            </p>
            }
        </div>

        <!--filtros por categoria-->
        <div class="flex flex-wrap justify-center gap-3 mb-8">
            <button (click)="filtrarPorCategoria('Todos')"
                class="px-4 py-2 rounded-full bg-blue-600 text-white text-sm font-medium hover:bg-blue-700 transition">
                Todos
            </button>
            <button (click)="filtrarPorCategoria('Psicologia')"
                class="px-4 py-2 rounded-full bg-blue-100 text-blue-700 text-sm font-medium hover:bg-blue-200 transition">
                Psicología
            </button>
            <button (click)="filtrarPorCategoria('Taller')"
                class="px-4 py-2 rounded-full bg-green-100 text-green-700 text-sm font-medium hover:bg-green-200 transition">
                Talleres
            </button>
            <button (click)="filtrarPorCategoria('Academico')"
                class="px-4 py-2 rounded-full bg-purple-100 text-purple-700 text-sm font-medium hover:bg-purple-200 transition">
                Académico
            </button>
            <button (click)="filtrarPorCategoria('Digital')"
                class="px-4 py-2 rounded-full bg-yellow-100 text-yellow-700 text-sm font-medium hover:bg-yellow-200 transition">
                Digital
            </button>
        </div>

        <!--BUSQUEDA-->
        <div class="max-w-md mx-auto mb-10">
            <label class="block text-sm font-medium text-gray-700 mb-2">Buscar Servicio:</label>
            <div class="relative">
                <input type="text" (input)="busqueda($event)" placeholder="Ej: Psicología, Taller, Apoyo..."
                    class="w-full rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 p-3 border pl-10">
                <svg class="absolute left-3 top-4.5 w-4 h-4 text-gray-400" aria-hidden="true"
                    xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20">
                    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z" />
                </svg>
                @if (serviciosFiltrados.length !== servicios.length) {
                <button (click)="limpiarBusqueda()" class="absolute right-3 top-3 text-gray-400 hover:text-gray-600">
                    ✕
                </button>
                }
            </div>
        </div>

        <!--SERVICIOS-->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
            @for (servicio of serviciosFiltrados; track servicio.id) {
            <div
                class="flex flex-col rounded-xl bg-white shadow-lg border border-gray-200 overflow-hidden hover:shadow-xl transition-all duration-300 hover:-translate-y-1">

                <!--icono del servicio CON SVG -->
                <div
                    class="relative h-56 bg-gradient-to-br from-gray-50 to-gray-100 flex flex-col items-center justify-center p-6">
                    <!--fondo del icono con SVG-->
                    <div class="w-24 h-24 rounded-full flex items-center justify-center mb-4 shadow-md" [ngClass]="{
                'bg-gradient-to-br from-blue-100 to-blue-200': servicio.categoria === 'Psicologia',
                'bg-gradient-to-br from-green-100 to-green-200': servicio.categoria === 'Taller',
                'bg-gradient-to-br from-purple-100 to-purple-200': servicio.categoria === 'Academico',
                'bg-gradient-to-br from-yellow-100 to-yellow-200': servicio.categoria === 'Digital'
            }">

                        <!--SVG para Psicologia-->
                        @if (servicio.categoria === 'Psicologia') {
                        <svg class="w-12 h-12 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                                d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
                        </svg>
                        }

                        <!--SVG para Taller-->
                        @if (servicio.categoria === 'Taller') {
                        <svg class="w-12 h-12 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                                d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" />
                        </svg>
                        }

                        <!--SVG para Academico-->
                        @if (servicio.categoria === 'Academico') {
                        <svg class="w-12 h-12 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                                d="M12 14l9-5-9-5-9 5 9 5zm0 0l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14zm0 0v7" />
                        </svg>
                        }

                        <!--SVG para Digital-->
                        @if (servicio.categoria === 'Digital') {
                        <svg class="w-12 h-12 text-yellow-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                                d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                        </svg>
                        }
                    </div>

                    <!--badge de categoria-->
                    <div class="mt-2">
                        @switch (servicio.categoria) {
                        @case ('Psicologia') {
                        <span
                            class="px-3 py-1 rounded-full text-xs font-semibold bg-blue-100 text-blue-800 border border-blue-200">
                            Psicología
                        </span>
                        }
                        @case ('Taller') {
                        <span
                            class="px-3 py-1 rounded-full text-xs font-semibold bg-green-100 text-green-800 border border-green-200">
                            Taller
                        </span>
                        }
                        @case ('Academico') {
                        <span
                            class="px-3 py-1 rounded-full text-xs font-semibold bg-purple-100 text-purple-800 border border-purple-200">
                            Académico
                        </span>
                        }
                        @case ('Digital') {
                        <span
                            class="px-3 py-1 rounded-full text-xs font-semibold bg-yellow-100 text-yellow-800 border border-yellow-200">
                            Digital
                        </span>
                        }
                        }
                    </div>
                </div>

                <!--contenido del servicio-->
                <div class="p-5 flex-grow">
                    <h3 class="text-xl font-bold text-gray-900 mb-2">{{servicio.nombre}}</h3>
                    <p class="text-gray-600 text-sm mb-4">{{servicio.descripcion}}</p>

                    <!--etiquetas-->
                    <div class="flex flex-wrap gap-1.5 mb-5">
                        @for (tag of servicio.tags; track tag) {
                        <span class="px-2 py-1 text-xs rounded-full bg-gray-100 text-gray-700">
                            {{tag}}
                        </span>
                        }
                    </div>

                    <!--boton de interes-->
                    <button (click)="seleccionar(servicio.nombre)"
                        class="w-full py-2.5 px-4 rounded-lg font-medium transition-colors" [ngClass]="{
                                    'bg-blue-50 text-blue-700 hover:bg-blue-100 border border-blue-200': servicio.categoria === 'Psicologia',
                                    'bg-green-50 text-green-700 hover:bg-green-100 border border-green-200': servicio.categoria === 'Taller',
                                    'bg-purple-50 text-purple-700 hover:bg-purple-100 border border-purple-200': servicio.categoria === 'Academico',
                                    'bg-yellow-50 text-yellow-700 hover:bg-yellow-100 border border-yellow-200': servicio.categoria === 'Digital'
                                }">
                        Me interesa este servicio
                    </button>
                </div>
            </div>
            } @empty {
            <!--mensaje si no hay resultados-->
            <div class="col-span-full text-center py-12">
                <div class="inline-flex items-center justify-center w-20 h-20 rounded-full bg-gray-100 mb-4">
                    <svg class="w-10 h-10 text-gray-400" aria-hidden="true" xmlns="http://www.w3.org/2000/svg"
                        fill="none" viewBox="0 0 20 20">
                        <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z" />
                    </svg>
                </div>
                <p class="text-gray-500 text-lg mb-4">No se encontraron servicios que coincidan con tu búsqueda.</p>

            </div>
            }
        </div>

        <!--contador de resultados-->
        @if (serviciosFiltrados.length > 0) {
        <div class="text-center mt-8 text-gray-500 text-sm">
            Mostrando {{serviciosFiltrados.length}} de {{servicios.length}} servicios
        </div>
        }
    </div>
</section>